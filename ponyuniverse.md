# Pony Universe

The TOSCA elements of the pony universe are intended to be used for splitting and matching test cases. For the matching of node templates a specific semantic of the requirement, capability, and relationship types is required. There are several options to find out which relationship type can be used for the matching:
  1. For requirement and capability types the property *requiredRelationshipType* can be used to mention the QName of a specific relationship type. This type is selected if it is available in the repository.
  2. For a relationship type a valid source and valid target can be specified. If there is a relationship type which the requirement type as valid source and the capability types as valid target element, this relationship is selected. If there is no matching the same is checked for the requirement and capability type the original types are derived from.
  3. It is assumed that two base capability types exist: *container* and *endpoint*. Container means the Node Template serves as host and endpoint indicates that a connection is required. Thus, based on the TOSCA YAML Simple Profile either a *hostedOn* or a *connectsTo* relationship is required. These types are available in each TOSCA runtime and are the fallback solutions for the matching.

Additionally, for the splitting of topologies the semantic of the relationship types have to be known to identify, e.g., all hosted node templates of a specific node template. For this the relationship types also required a strong inheritance hierarchy. The *base type*, which has no further parent must be either the type *hostedOn* or must have as valid target the capability type *container*. The same applies for the connectsTo semmantics.

The ideas of the different node types and relationship types in the **pony universe** are as follows:
  - In the universe two different pony breeds are available: [shetland_pony](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/shetland_pony) and [unicorn](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/unicorn)
  - A pony can, for example [attendTo](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/attendTo) a [ponycompetition](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ponycompetition). The relationship type attendTo is derived from the relationship type [connectsTo](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/connectsTo), which has the capability type 
[Endpoint](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fdocs.oasis-open.org%252Ftosca%252Fns%252F2011%252F12/Endpoint) as valid target assigned. A matching between a pony (shetland_pony or unicorn) is possible based on the matching between the requirement type [ReqCompetition](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqCompetition), added to the Requirement Definitions of the two ponys, and the capability type [CapCompetition](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapCompetition) added to the ponycompetition node type.
- A ponycompetition can [requires](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/requires) specific equipement, depending on the environment in which the competition is held. In the pony universe two types of equipement are distinguished: [dressageequipment](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/dressageequipment) and [westernequipment](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/westernequipment). For the matching the ponycompetition has the requirement type [ReqEquipment](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqEquipment) assigned and the two equipment types the capability type [CapEquipment](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapEquipment). The relationship type requires used for the matching is derived from [hostedOn](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/hostedOn) to indicate the hosting semantics. Additionally, the valid source of the type requires is the requirement type ReqEquipment and the valid source is the capability type CapEquipment. Thus, this relationship type is selected for the matching between these types. The hostedOn relationship has the capability type [Container](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fdocs.oasis-open.org%252Ftosca%252Fns%252F2011%252F12/Container) attached. For the case that the specific relationship type requires is not available in a TOSCA runtime, the CapEquipment capability type is derived from the Container type to enable the selection of the fallback base type hostedOn.
- A pony can [standsOn](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/standsOn) either a [pasture](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/pasture) *(Weide)* or [straw](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/straw), which can be [hostedOn](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/hostedOn) a [stall](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/stall). For the ponys the requirement type [ReqWarmFloor](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqWarmFloor) is used to enable a matching depending on the enviroment. The pasture as well as the straw provided the capability [CapWarmFloor](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapWarmFloor). The relationship type standsOn indicates the ReqWarmFloor requirement type as valid source and the CapWarmFloor capability type as valid target. However, in case this specific relationship type is not available the capability type CapWarmFloor is derived from the capability type Container. To add a clear semantics to the relationship type, it inherits from the relationship type hostedOn.
- To enable an extension of different areas where straw can be used for the ponys to stand on or to enable the matching with different stalls depending on the environment, the requirement type [ReqCanHostStraw](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqCanHostStraw) and the capability type [CapCanHostStraw](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapCanHostStraw) are added. For a matching between a requirement and a capability of these types the relationship type hostedOn is selected because no specific relationship type exists and the capability tpye CapCanHostStraw is derived from the capability type Container.
- A pony can [eat](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/eat) [oat](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/oat), which can be [hostedOn](https://github.com/winery/test-repository/tree/black/relationshiptypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/hostedOn) in a [trough](https://github.com/winery/test-repository/tree/black/nodetypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/trough) *(Trog)*. The shetland_pony has the requirement type [ReqDryFood](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqDryFood) attached, while the unicorn has the requirement [ReqFood](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqFood). The type ReqDryFood inherits from the type ReqFood. This mechanisms can be used for testing different matchings because of the type hierarchy. However, currently only the specific relationship type eat is available which has the requirement type ReqFood added as valid source and the capability type [CapFood](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapFood) added as valided target. This capability type is assigned to the node type oat to enable the matching between a pony node template and an oat template. CapFood is derived from the base type Endpoint to ensure the connectsTo relationship type as fallback matching solution. The relationship type eat is also derived from connectsTo to make the semantic explicit. For hosting the oat the requirement type [ReqCanHostOat](https://github.com/winery/test-repository/tree/black/requirementtypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/ReqCanHostOat) is defined and attached to the oat node type and the capability type [CapCanHostOat](https://github.com/winery/test-repository/tree/black/capabilitytypes/http%253A%252F%252Fwinery.opentosca.org%252Ftest%252Fponyuniverse/CapCanHostOat) is assigned to the trough node type. The capability type is derived from the type Container and because no specific relationship type is defined, the hostedOn relationship type is used for a matching.

The pony universe is intended to be extended with further elements if required. All extensions should be documented here!
